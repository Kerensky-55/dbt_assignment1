version: 2

models:
  - name: dim_customers
    description: "Customer dimension table containing purchase history, spending, and segmentation details."
    columns:
      - name: customer_id
        description:  Customer number. Nominal. A 5-digit integral number uniquely assigned to each customer.
        tests:
          - not_null
          - unique
      - name: first_purchase
        description: Timestamp of the customer's first purchase.
        tests:
          - not_null
      - name: latest_purchase
        description: Timestamp of the customer's most recent purchase.
        tests:
          - not_null
      - name: latest_country
        description: The latest country of purchase for the customer.
        tests:
          - not_null
      - name: total_amount_spent
        description: Total revenue generated by the customer.
        tests:
          - not_null
      - name: total_orders
        description: Total number of orders placed by the customer.
        tests:
          - not_null
      - name: customer_segment
        description: Segment classification based on RFM analysis. "{{ doc('customer_segments_dimension') }}"
        tests:
          - not_null

  - name: dim_products
    description: Product dimension table containing product details and sales performance metrics.
    columns:
      - name: stock_code
        description: Unique identifier for each product.
        tests:
          - not_null
          - unique
      - name: description
        description: Product description.
        tests:
          - not_null
      - name: latest_unit_price
        description: Latest recorded unit price of the product.
        tests:
          - not_null
      - name: total_quantity_sold
        description: Total quantity of the product sold across all transactions.
        tests:
          - not_null
